{% extends 'global/base.html' %}
{% load static %}

{% block title %}Семинары - Phantom{% endblock %}
{% block description %}Участвуйте в образовательных семинарах по стрельбе в клубе Phantom.{% endblock %}

{% block content %}
<main class="main-content">
    <div class="container">
        <div class="page-header fade-in">
            <div class="page-header-content">
                <div class="page-icon">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <div class="page-text">
                    <h1>Семинары</h1>
                    <p>Изучайте теорию и технику стрельбы на образовательных семинарах</p>
                </div>
            </div>
            
            {% if user.is_authenticated and user.role_user == 'admin' %}
            <div class="page-actions">
                <a href="{% url 'seminar-create' %}" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Создать семинар
                </a>
            </div>
            {% endif %}
        </div>

        <div class="content-section">
            <div class="seminar-grid" data-filter-container>
                {% for seminar in seminar_list %}
                <div class="seminar-card card slide-in-left" data-filter-item="seminar" style="animation-delay: {{ forloop.counter0|floatformat:1 }}s;">
                    <div class="seminar-header">
                        <div class="seminar-type">
                            <i class="fas fa-chalkboard-teacher"></i>
                            Семинар
                        </div>
                        <div class="seminar-status">
                            {% if seminar.status %}
                                <span class="status-badge active">
                                    <i class="fas fa-circle"></i>
                                    Активен
                                </span>
                            {% else %}
                                <span class="status-badge inactive">
                                    <i class="fas fa-circle"></i>
                                    Завершен
                                </span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="seminar-info">
                        <div class="seminar-date">
                            <i class="fas fa-calendar-alt"></i>
                            {% if seminar.date %}
                                {{ seminar.date|date:"d.m.Y в H:i" }}
                            {% else %}
                                Дата уточняется
                            {% endif %}
                        </div>
                        
                        <div class="seminar-participants">
                            <i class="fas fa-users"></i>
                            <span>{{ seminar.participants.count }} участников</span>
                        </div>
                    </div>

                    <div class="seminar-actions">
                        <a href="{{ seminar.get_absolute_url }}" class="btn btn-outline">
                            <i class="fas fa-eye"></i>
                            Подробнее
                        </a>
                        
                        {% if user.is_authenticated %}
                            {% if user in seminar.participants.all %}
                                <span class="btn btn-success">
                                    <i class="fas fa-check"></i>
                                    Участвую
                                </span>
                            {% else %}
                                <button class="btn btn-primary" onclick="joinSeminar({{ seminar.pk }})">
                                    <i class="fas fa-plus"></i>
                                    Записаться
                                </button>
                            {% endif %}
                        {% endif %}

                        {% if user.is_authenticated and user.role_user == 'admin' %}
                        <div class="admin-actions">
                            <a href="{% url 'seminar-edit' seminar.pk %}" class="btn-icon" title="Редактировать">
                                <i class="fas fa-edit"></i>
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% empty %}
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h3>Нет активных семинаров</h3>
                    <p>В данный момент нет запланированных семинаров. Следите за обновлениями!</p>
                    {% if user.is_authenticated and user.role_user == 'admin' %}
                    <a href="{% url 'seminar-create' %}" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Создать первый семинар
                    </a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</main>

{% endblock %}